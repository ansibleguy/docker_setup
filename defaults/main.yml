---
# see: https://docs.docker.com/engine/install/debian/

docker: {}

defaults_docker:
  server: true
  compose: false
  compose_version: '1.29.2'
  listen_tcp:
    enable: false
    port: 2375
    bind: '0.0.0.0'

CONFIG_DOCKER: "{{ defaults_docker | combine(docker, recursive=true) }}"

DOCKER_HC:
  dependencies:
    - 'apt-transport-https'
    - 'ca-certificates'
    - 'gnupg'
    - 'curl'
    - 'systemd'

  repo_key_url: "https://download.docker.com/linux/{{ ansible_distribution|lower }}/gpg"
  repo_key: '/usr/share/keyrings/docker-archive-keyring.gpg'
  repo: "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg]
  https://download.docker.com/linux/{{ ansible_distribution|lower }} {{ ansible_distribution_release }} stable"

  packages:
    server:
    - 'docker-ce'
    - 'containerd.io'
    client:
      - 'docker-ce-cli'

  compose_url: "https://github.com/docker/compose/releases/download/{{ CONFIG_DOCKER.compose_version }}/docker-compose-Linux-x86_64"
